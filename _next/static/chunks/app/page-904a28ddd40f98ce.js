(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{43550:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>tN});var s=a(95155),l=a(12115),r=a(5263),n=a(50172),o=a(7390),i=a(99708),d=a(74466),c=a(59434);let m=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),u=l.forwardRef((e,t)=>{let{className:a,variant:l,size:r,asChild:n=!1,...o}=e,d=n?i.DX:"button";return(0,s.jsx)(d,{className:(0,c.cn)(m({variant:l,size:r,className:a})),ref:t,...o})});u.displayName="Button";var h=a(52699),x=a.n(h),g=a(87481);function p(){let{toast:e}=(0,g.dj)(),[t,a]=l.useState(!1),i=async()=>{a(!0),e({title:"Generating Screenshot...",description:"Please wait while we capture the page."});let t=window.scrollX,s=window.scrollY;window.scrollTo(0,0);try{let a=(await x()(document.documentElement,{useCORS:!0,allowTaint:!0,logging:!1,scale:window.devicePixelRatio||1,scrollX:-t,scrollY:-s,windowWidth:document.documentElement.scrollWidth,windowHeight:document.documentElement.scrollHeight})).toDataURL("image/png",1),l=document.createElement("a");l.href=a,l.download="session-insights-screenshot.png",document.body.appendChild(l),l.click(),document.body.removeChild(l),e({title:"Screenshot Downloaded!",description:"The page has been saved as an image."})}catch(t){console.error("Error taking screenshot:",t),e({variant:"destructive",title:"Screenshot Failed",description:"string"==typeof t?t:t instanceof Error?t.message:"Could not capture the page. Please try again."})}finally{window.scrollTo(t,s),a(!1)}};return(0,s.jsx)("header",{className:"py-6 px-4 md:px-6 border-b",children:(0,s.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(r.A,{className:"h-8 w-8 text-primary"}),(0,s.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-foreground",children:"Wishnet Session Insights"})]}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1 ml-11",children:"Welcome, Sourav Sadhukhan!"})]}),(0,s.jsxs)(u,{onClick:i,variant:"outline",size:"icon",disabled:t,title:"Share Page Screenshot",children:[t?(0,s.jsx)(n.A,{className:"h-4 w-4 animate-spin"}):(0,s.jsx)(o.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Share Page"})]})]})})}let f=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("textarea",{className:(0,c.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});f.displayName="Textarea";let j=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...l})});j.displayName="Card";let y=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",a),...l})});y.displayName="CardHeader";let w=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",a),...l})});w.displayName="CardTitle";let N=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",a),...l})});N.displayName="CardDescription";let b=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("p-6 pt-0",a),...l})});b.displayName="CardContent",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("flex items-center p-6 pt-0",a),...l})}).displayName="CardFooter";var v=a(52333);function D(e){let{onSubmit:t,isLoading:a}=e,[r,o]=l.useState("");return(0,s.jsxs)(j,{className:"shadow-lg",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(v.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)(w,{children:"Input Session Data (JSON)"})]}),(0,s.jsxs)(N,{children:["Paste your session data as a JSON array below. Each object in the array should represent a session with the following fields:",(0,s.jsxs)("ul",{className:"list-disc list-inside text-xs mt-1 pl-2",children:[(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"text-xs",children:"loginTime"}),': string (format: "DD-MM-YYYY HH:MM:SS")']}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"text-xs",children:"sessionTime"}),': string (format: "HH:MM:SS")']}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"text-xs",children:"download"}),": number (in MB)"]}),(0,s.jsxs)("li",{children:[(0,s.jsx)("code",{className:"text-xs",children:"upload"}),": number (in MB)"]})]})]})]}),(0,s.jsx)(b,{children:(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t(r)},className:"space-y-4",children:[(0,s.jsx)(f,{placeholder:'[\n  {\n    "loginTime": "01-08-2024 10:00:00",\n    "sessionTime": "01:30:00",\n    "download": 150.5,\n    "upload": 75.2\n  },\n  {\n    "loginTime": "01-08-2024 23:30:00",\n    "sessionTime": "02:15:00",\n    "download": 220.0,\n    "upload": 95.8\n  }\n]',value:r,onChange:e=>o(e.target.value),rows:10,className:"min-h-[200px] text-sm font-mono",disabled:a}),(0,s.jsx)(u,{type:"submit",disabled:a||!r.trim(),className:"w-full sm:w-auto",children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"Load Data"})]})})]})}var S=a(23478),M=a(79556);let k=S.bL,T=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(S.q7,{ref:t,className:(0,c.cn)("border-b",a),...l})});T.displayName="AccordionItem";let A=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsx)(S.Y9,{className:"flex",children:(0,s.jsxs)(S.l9,{ref:t,className:(0,c.cn)("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",a),...r,children:[l,(0,s.jsx)(M.A,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})})});A.displayName=S.l9.displayName;let B=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsx)(S.UC,{ref:t,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...r,children:(0,s.jsx)("div",{className:(0,c.cn)("pb-4 pt-0",a),children:l})})});B.displayName=S.UC.displayName;var I=a(73503),C=a(40207),U=a(50286),_=a(98328),O=a(98920),L=a(97208);function F(e){let{data:t}=e;return(0,s.jsxs)(j,{className:"shadow-lg border-primary/30 bg-card",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(I.A,{className:"h-8 w-8 text-primary"}),(0,s.jsx)(w,{className:"text-2xl",children:"AI-Powered Session Analysis"})]}),(0,s.jsx)(N,{children:"Key insights and summaries derived from your session data by our AI."})]}),(0,s.jsx)(b,{className:"space-y-4 pt-2",children:(0,s.jsxs)(k,{type:"multiple",defaultValue:["item-patterns","item-session"],className:"w-full",children:[(0,s.jsxs)(T,{value:"item-patterns",children:[(0,s.jsx)(A,{className:"text-lg hover:no-underline",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(C.A,{className:"h-5 w-5 text-primary/80"}),"Overall Usage Patterns"]})}),(0,s.jsxs)(B,{className:"pt-2 space-y-3 text-sm",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-muted-foreground mb-1",children:"Peak Hours:"}),(0,s.jsx)("p",{className:"text-foreground/90 bg-muted/30 p-2 rounded-md",children:t.peakHours||"Not identified"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-semibold text-muted-foreground mb-1",children:"Quiet Hours:"}),(0,s.jsx)("p",{className:"text-foreground/90 bg-muted/30 p-2 rounded-md",children:t.quietHours||"Not identified"})]})]})]}),(0,s.jsxs)(T,{value:"item-session",children:[(0,s.jsx)(A,{className:"text-lg hover:no-underline",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(U.A,{className:"h-5 w-5 text-primary/80"}),"Session-Level Insights"]})}),(0,s.jsx)(B,{className:"pt-2 text-sm text-foreground/90 bg-muted/30 p-3 rounded-md leading-relaxed",children:t.sessionLevelSummary||"No specific session-level insights generated."})]}),(0,s.jsxs)(T,{value:"item-daily",children:[(0,s.jsx)(A,{className:"text-lg hover:no-underline",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(_.A,{className:"h-5 w-5 text-primary/80"}),"Daily Insights"]})}),(0,s.jsx)(B,{className:"pt-2 text-sm text-foreground/90 bg-muted/30 p-3 rounded-md leading-relaxed",children:t.dailyLevelSummary||"No specific daily insights generated."})]}),(0,s.jsxs)(T,{value:"item-weekly",children:[(0,s.jsx)(A,{className:"text-lg hover:no-underline",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(O.A,{className:"h-5 w-5 text-primary/80"}),"Weekly Insights"]})}),(0,s.jsx)(B,{className:"pt-2 text-sm text-foreground/90 bg-muted/30 p-3 rounded-md leading-relaxed",children:t.weeklyLevelSummary||"No specific weekly insights generated."})]}),(0,s.jsxs)(T,{value:"item-monthly",children:[(0,s.jsx)(A,{className:"text-lg hover:no-underline",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"h-5 w-5 text-primary/80"})," ","Monthly Insights"]})}),(0,s.jsx)(B,{className:"pt-2 text-sm text-foreground/90 bg-muted/30 p-3 rounded-md leading-relaxed",children:t.monthlyLevelSummary||"No specific monthly insights generated."})]})]})})]})}class R extends Error{constructor(e){super(e),this.name="SessionDataParsingError"}}function P(e){let t=e.match(/^(\d{2})-(\d{2})-(\d{4}) (\d{2}):(\d{2}):(\d{2})$/);if(!t)throw new R('Invalid loginTime format: "'.concat(e,'". Expected "DD-MM-YYYY HH:MM:SS".'));let a=parseInt(t[1],10),s=parseInt(t[2],10)-1,l=parseInt(t[3],10),r=parseInt(t[4],10),n=parseInt(t[5],10),o=parseInt(t[6],10),i=new Date(l,s,a,r,n,o);if(i.getFullYear()!==l||i.getMonth()!==s||i.getDate()!==a||i.getHours()!==r||i.getMinutes()!==n||i.getSeconds()!==o)throw new R('Invalid date values in loginTime: "'.concat(e,'".'));return i}function E(e){let t=e.match(/^(\d{2}):(\d{2}):(\d{2})$/);if(!t)throw new R('Invalid sessionTime format: "'.concat(e,'". Expected "HH:MM:SS".'));let a=parseInt(t[1],10),s=parseInt(t[2],10),l=parseInt(t[3],10);if(a<0||s<0||s>59||l<0||l>59)throw new R('Invalid time values in sessionTime: "'.concat(e,'".'));return 3600*a+60*s+l}var W=a(39140);function Y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(isNaN(e)||e<0)&&(e=0);let a=Math.floor(e/86400),s=e%86400,l=Math.floor(s/3600),r=s%3600,n=Math.floor(r/60),o=Math.floor(r%60),i=String(l).padStart(2,"0"),d=String(n).padStart(2,"0"),c=String(o).padStart(2,"0"),m="";return(a>0&&(m="".concat(a,"d ")),t||o>0||0===e?m+="".concat(i,":").concat(d,":").concat(c):m+="".concat(i,":").concat(d),a>0&&0===l&&0===n&&0===o&&!t?m="".concat(a,"d 00:00"):a>0&&0===l&&0===n&&0===o&&t&&(m="".concat(a,"d 00:00:00")),(a||l||n||0!==o||t||!(e>0))&&(a||"00:00"!==m||!(e>0)||!(e<60)||!t))?a||"00:00"!==m||t||0!==e?!a&&"00:00:00"===m&&t&&0===e?"00:00:00":m:"00:00":"00:00:".concat(c)}function K(e){if(!(e instanceof Date)||isNaN(e.getTime()))return"Invalid Date";let t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),s=e.getFullYear();return"".concat(t,"-").concat(a,"-").concat(s)}function H(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return isNaN(e)||e<0?"0 MB":e>=1024?"".concat((e/1024).toFixed(t)," GB"):"".concat(e.toFixed(t)," MB")}function V(e,t){return!e||!t||isNaN(e.getTime())||isNaN(t.getTime())?0:(0,W.m)(t,e)+1}let z=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,c.cn)("w-full caption-bottom text-sm",a),...l})})});z.displayName="Table";let J=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("thead",{ref:t,className:(0,c.cn)("[&_tr]:border-b",a),...l})});J.displayName="TableHeader";let G=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,c.cn)("[&_tr:last-child]:border-0",a),...l})});G.displayName="TableBody",l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,c.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",a),...l})}).displayName="TableFooter";let $=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("tr",{ref:t,className:(0,c.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",a),...l})});$.displayName="TableRow";let Q=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("th",{ref:t,className:(0,c.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",a),...l})});Q.displayName="TableHead";let X=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("td",{ref:t,className:(0,c.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",a),...l})});X.displayName="TableCell";let q=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)("caption",{ref:t,className:(0,c.cn)("mt-4 text-sm text-muted-foreground",a),...l})});q.displayName="TableCaption";var Z=a(60960);function ee(e){let{sessions:t}=e;return t&&0!==t.length?(0,s.jsxs)(j,{className:"shadow-lg w-full",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(Z.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)(w,{children:"Individual Sessions"})]}),(0,s.jsx)(N,{children:"Detailed log of individual user sessions, sorted by most recent."})]}),(0,s.jsx)(b,{children:(0,s.jsxs)(z,{children:[(0,s.jsx)(q,{children:"A list of user sessions."}),(0,s.jsx)(J,{children:(0,s.jsxs)($,{children:[(0,s.jsx)(Q,{className:"w-[180px]",children:"Login Time"}),(0,s.jsx)(Q,{children:"Session Duration"}),(0,s.jsx)(Q,{className:"text-right",children:"Download"}),(0,s.jsx)(Q,{className:"text-right",children:"Upload"})]})}),(0,s.jsx)(G,{children:t.map((e,t)=>{let a,l;try{a=P(e.loginTime),l=E(e.sessionTime)}catch(a){return(0,s.jsx)($,{children:(0,s.jsxs)(X,{colSpan:4,className:"text-destructive",children:["Error parsing session data: ",e.loginTime]})},"error-".concat(t))}return(0,s.jsxs)($,{children:[(0,s.jsxs)(X,{className:"font-medium",children:[K(a)," ",a.toLocaleTimeString()]}),(0,s.jsx)(X,{children:Y(l,!0)}),(0,s.jsx)(X,{className:"text-right",children:H(e.download,1)}),(0,s.jsx)(X,{className:"text-right",children:H(e.upload,1)})]},"".concat(e.loginTime,"-").concat(t))})})]})})]}):(0,s.jsxs)(j,{children:[(0,s.jsx)(y,{children:(0,s.jsx)(w,{children:"Session Data"})}),(0,s.jsx)(b,{children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No session data to display."})})]})}function et(e){let{data:t}=e;return t&&0!==t.length?(0,s.jsxs)(j,{className:"shadow-lg w-full",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(_.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)(w,{children:"Daily Aggregated Data"})]}),(0,s.jsx)(N,{children:"Summary of session data aggregated by day, sorted by most recent."})]}),(0,s.jsx)(b,{children:(0,s.jsxs)(z,{children:[(0,s.jsx)(q,{children:"A list of daily aggregated session data."}),(0,s.jsx)(J,{children:(0,s.jsxs)($,{children:[(0,s.jsx)(Q,{className:"w-[120px]",children:"Date"}),(0,s.jsx)(Q,{children:"Active Duration"}),(0,s.jsx)(Q,{children:"Inactive Duration"}),(0,s.jsx)(Q,{className:"text-right",children:"Total Downloaded"}),(0,s.jsx)(Q,{className:"text-right",children:"Total Uploaded"}),(0,s.jsx)(Q,{className:"text-center",children:"Session Segments"})]})}),(0,s.jsx)(G,{children:t.map((e,t)=>{let a=86400-e.totalDurationSeconds;return(0,s.jsxs)($,{children:[(0,s.jsx)(X,{className:"font-medium",children:K(e.date)}),(0,s.jsx)(X,{children:Y(e.totalDurationSeconds,!0)}),(0,s.jsx)(X,{children:Y(a>0?a:0,!0)}),(0,s.jsx)(X,{className:"text-right",children:H(e.totalDownloadedMB,1)}),(0,s.jsx)(X,{className:"text-right",children:H(e.totalUploadedMB,1)}),(0,s.jsx)(X,{className:"text-center",children:e.sessionCount})]},"daily-agg-".concat(e.date.toISOString(),"-").concat(t))})})]})})]}):(0,s.jsxs)(j,{children:[(0,s.jsx)(y,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(_.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)(w,{children:"Daily Aggregated Data"})]})}),(0,s.jsx)(b,{children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"No daily aggregated data to display."})})]})}var ea=a(83540),es=a(94517),el=a(24026);let er={light:"",dark:".dark"},en=l.createContext(null);function eo(){let e=l.useContext(en);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let ei=l.forwardRef((e,t)=>{let{id:a,className:r,children:n,config:o,...i}=e,d=l.useId(),m="chart-".concat(a||d.replace(/:/g,""));return(0,s.jsx)(en.Provider,{value:{config:o},children:(0,s.jsxs)("div",{"data-chart":m,ref:t,className:(0,c.cn)("flex justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",r),...i,children:[(0,s.jsx)(ed,{id:m,config:o}),(0,s.jsx)(ea.u,{children:n})]})})});ei.displayName="Chart";let ed=e=>{let{id:t,config:a}=e,l=Object.entries(a).filter(e=>{let[,t]=e;return t.theme||t.color});return l.length?(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(er).map(e=>{let[a,s]=e;return"\n".concat(s," [data-chart=").concat(t,"] {\n").concat(l.map(e=>{var t;let[s,l]=e,r=(null===(t=l.theme)||void 0===t?void 0:t[a])||l.color;return r?"  --color-".concat(s,": ").concat(r,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};es.m,l.forwardRef((e,t)=>{let{active:a,payload:r,className:n,indicator:o="dot",hideLabel:i=!1,hideIndicator:d=!1,label:m,labelFormatter:u,labelClassName:h,formatter:x,color:g,nameKey:p,labelKey:f}=e,{config:j}=eo(),y=l.useMemo(()=>{var e;if(i||!(null==r?void 0:r.length))return null;let[t]=r,a="".concat(f||t.dataKey||t.name||"value"),l=em(j,t,a),n=f||"string"!=typeof m?null==l?void 0:l.label:(null===(e=j[m])||void 0===e?void 0:e.label)||m;return u?(0,s.jsx)("div",{className:(0,c.cn)("font-medium",h),children:u(n,r)}):n?(0,s.jsx)("div",{className:(0,c.cn)("font-medium",h),children:n}):null},[m,u,r,i,h,j,f]);if(!a||!(null==r?void 0:r.length))return null;let w=1===r.length&&"dot"!==o;return(0,s.jsxs)("div",{ref:t,className:(0,c.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",n),children:[w?null:y,(0,s.jsx)("div",{className:"grid gap-1.5",children:r.map((e,t)=>{let a="".concat(p||e.name||e.dataKey||"value"),l=em(j,e,a),r=g||e.payload.fill||e.color;return(0,s.jsx)("div",{className:(0,c.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===o&&"items-center"),children:x&&(null==e?void 0:e.value)!==void 0&&e.name?x(e.value,e.name,e,t,e.payload):(0,s.jsxs)(s.Fragment,{children:[(null==l?void 0:l.icon)?(0,s.jsx)(l.icon,{}):!d&&(0,s.jsx)("div",{className:(0,c.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===o,"w-1":"line"===o,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===o,"my-0.5":w&&"dashed"===o}),style:{"--color-bg":r,"--color-border":r}}),(0,s.jsxs)("div",{className:(0,c.cn)("flex flex-1 justify-between leading-none",w?"items-end":"items-center"),children:[(0,s.jsxs)("div",{className:"grid gap-1.5",children:[w?y:null,(0,s.jsx)("span",{className:"text-muted-foreground",children:(null==l?void 0:l.label)||e.name})]}),e.value&&(0,s.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})}).displayName="ChartTooltip",el.s;let ec=l.forwardRef((e,t)=>{let{className:a,hideIcon:l=!1,payload:r,verticalAlign:n="bottom",nameKey:o}=e,{config:i}=eo();return(null==r?void 0:r.length)?(0,s.jsx)("div",{ref:t,className:(0,c.cn)("flex items-center justify-center gap-4","top"===n?"pb-3":"pt-3",a),children:r.map(e=>{let t="".concat(o||e.dataKey||"value"),a=em(i,e,t);return(0,s.jsxs)("div",{className:(0,c.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==a?void 0:a.icon)&&!l?(0,s.jsx)(a.icon,{}):(0,s.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==a?void 0:a.label]},e.value)})}):null});function em(e,t,a){if("object"!=typeof t||null===t)return;let s="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,l=a;return a in t&&"string"==typeof t[a]?l=t[a]:s&&a in s&&"string"==typeof s[a]&&(l=s[a]),l in e?e[l]:e[a]}ec.displayName="ChartLegend";var eu=a(93504),eh=a(94754),ex=a(96025),eg=a(16238),ep=a(21374),ef=a(68718),ej=a(16923),ey=a(37648);let ew={download:{label:"Download (MB)",color:"hsl(var(--chart-1))",icon:ef.A},upload:{label:"Upload (MB)",color:"hsl(var(--chart-2))",icon:ej.A}};function eN(e){let{sessions:t}=e,a=l.useMemo(()=>t&&0!==t.length?t.map(e=>{try{let t=P(e.loginTime),a=E(e.sessionTime);return{timestamp:t.getTime(),loginTimeISO:t.toISOString(),download:e.download,upload:e.upload,durationSeconds:a,sessionTimeFormatted:Y(a,!0),loginDateTimeFormatted:"".concat(K(t)," ").concat(t.toLocaleTimeString())}}catch(t){return console.error("Error parsing session for chart:",t,e),null}}).filter(e=>null!==e).sort((e,t)=>e.timestamp-t.timestamp):[],[t]);return a&&0!==a.length?(0,s.jsxs)(j,{className:"shadow-lg",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(C.A,{className:"h-6 w-6 text-primary"}),(0,s.jsx)(w,{children:"Session Timeline"})]}),(0,s.jsx)(N,{children:"Timeline of individual session downloads and uploads."})]}),(0,s.jsx)(b,{children:(0,s.jsx)(ei,{config:ew,className:"h-[70vh] w-full",children:(0,s.jsxs)(eu.b,{accessibilityLayer:!0,data:a,margin:{top:5,right:20,left:0,bottom:5},children:[(0,s.jsx)(eh.d,{vertical:!1,strokeDasharray:"3 3"}),(0,s.jsx)(ex.W,{dataKey:"timestamp",type:"number",domain:["dataMin","dataMax"],tickFormatter:e=>{let t=new Date(e);return"".concat(K(t)," ").concat(t.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))},tickCount:a.length>20?10:a.length>5?5:void 0,angle:a.length>10?-30:0,textAnchor:a.length>10?"end":"middle",height:a.length>10?70:30,minTickGap:20}),(0,s.jsx)(eg.h,{yAxisId:"left",label:{value:"Data (MB)",angle:-90,position:"insideLeft",offset:10},tickFormatter:e=>H(e,0)}),(0,s.jsx)(es.m,{content:(0,s.jsx)(e=>{let{active:t,payload:a,label:l}=e;if(t&&a&&a.length){let e=a[0].payload;return(0,s.jsxs)("div",{className:"bg-background border p-3 shadow-lg rounded-md text-sm",children:[(0,s.jsx)("p",{className:"font-bold mb-1",children:e.loginDateTimeFormatted}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(ey.A,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),"Duration: ",e.sessionTimeFormatted]}),a.map(e=>(0,s.jsxs)("p",{style:{color:e.color},className:"flex items-center",children:["download"===e.dataKey&&(0,s.jsx)(ef.A,{className:"mr-1.5 h-4 w-4"}),"upload"===e.dataKey&&(0,s.jsx)(ej.A,{className:"mr-1.5 h-4 w-4"}),e.name,": ",H(e.value)]},e.dataKey))]})}return null},{}),cursor:{strokeDasharray:"3 3"}}),(0,s.jsx)(el.s,{content:(0,s.jsx)(ec,{}),verticalAlign:"top",wrapperStyle:{paddingBottom:"10px"}}),(0,s.jsx)(ep.N,{yAxisId:"left",type:"monotone",dataKey:"download",stroke:"var(--color-download)",strokeWidth:2,dot:{r:3},activeDot:{r:6},name:ew.download.label}),(0,s.jsx)(ep.N,{yAxisId:"left",type:"monotone",dataKey:"upload",stroke:"var(--color-upload)",strokeWidth:2,dot:{r:3},activeDot:{r:6},name:ew.upload.label})]})})})]}):(0,s.jsxs)(j,{children:[(0,s.jsxs)(y,{children:[(0,s.jsx)(w,{children:"Session Timeline"}),(0,s.jsx)(N,{children:"No session data to display in chart."})]}),(0,s.jsx)(b,{className:"flex items-center justify-center min-h-[300px]",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please load valid session data."})})]})}var eb=a(30955),ev=a(80659);let eD={totalDownloadedMB:{label:"Download (MB)",color:"hsl(var(--chart-1))",icon:ef.A},totalUploadedMB:{label:"Upload (MB)",color:"hsl(var(--chart-2))",icon:ej.A}};function eS(e){let{data:t,chartTitlePrefix:a=""}=e,r=l.useMemo(()=>t&&0!==t.length?t.map(e=>({date:K(e.date),timestamp:e.date.getTime(),totalDownloadedMB:parseFloat(e.totalDownloadedMB.toFixed(2)),totalUploadedMB:parseFloat(e.totalUploadedMB.toFixed(2)),totalDurationSeconds:e.totalDurationSeconds})).sort((e,t)=>e.timestamp-t.timestamp):[],[t]);return r&&0!==r.length?(0,s.jsxs)(j,{className:"shadow-lg",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ev.A,{className:"h-6 w-6 text-primary"}),(0,s.jsxs)(w,{children:[a,"Daily Aggregated Data Trends"]})]}),(0,s.jsx)(N,{children:"Daily total download and upload volume trends."})]}),(0,s.jsx)(b,{children:(0,s.jsx)(ei,{config:eD,className:"h-[70vh] w-full",children:(0,s.jsxs)(eu.b,{accessibilityLayer:!0,data:r,margin:{top:5,right:20,left:0,bottom:r.length>10?50:5},children:[(0,s.jsx)(eh.d,{vertical:!1,strokeDasharray:"3 3"}),(0,s.jsx)(ex.W,{dataKey:"date",tickLine:!1,axisLine:!0,tickMargin:10,angle:r.length>10?-45:0,textAnchor:r.length>10?"end":"middle",minTickGap:0,interval:r.length>20?Math.floor(r.length/10):0}),(0,s.jsx)(eg.h,{label:{value:"Data (MB)",angle:-90,position:"insideLeft",offset:10},tickFormatter:e=>H(e,0)}),(0,s.jsx)(es.m,{content:(0,s.jsx)(e=>{let{active:t,payload:a,label:l}=e;if(t&&a&&a.length){let e=a[0].payload,t=86400-e.totalDurationSeconds;return(0,s.jsxs)("div",{className:"bg-background border p-3 shadow-lg rounded-md text-sm",children:[(0,s.jsxs)("p",{className:"font-bold mb-1",children:["Date: ",l]}),void 0!==e.totalDurationSeconds&&(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(ey.A,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),"Active: ",Y(e.totalDurationSeconds,!0)]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(eb.A,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),"Inactive: ",Y(t>0?t:0,!0)]}),a.map(e=>(0,s.jsxs)("p",{style:{color:e.stroke},className:"flex items-center",children:["totalDownloadedMB"===e.dataKey&&(0,s.jsx)(ef.A,{className:"mr-1.5 h-4 w-4"}),"totalUploadedMB"===e.dataKey&&(0,s.jsx)(ej.A,{className:"mr-1.5 h-4 w-4"}),e.name,": ",H(e.value)]},e.dataKey))]})}return null},{}),cursor:{strokeDasharray:"3 3"}}),(0,s.jsx)(el.s,{content:(0,s.jsx)(ec,{}),verticalAlign:"top",wrapperStyle:{paddingBottom:"10px"}}),(0,s.jsx)(ep.N,{type:"monotone",dataKey:"totalDownloadedMB",stroke:"var(--color-totalDownloadedMB)",strokeWidth:2,dot:{r:3},activeDot:{r:6},name:eD.totalDownloadedMB.label}),(0,s.jsx)(ep.N,{type:"monotone",dataKey:"totalUploadedMB",stroke:"var(--color-totalUploadedMB)",strokeWidth:2,dot:{r:3},activeDot:{r:6},name:eD.totalUploadedMB.label})]})})})]}):(0,s.jsxs)(j,{children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(w,{children:[a,"Daily Aggregation Chart"]}),(0,s.jsx)(N,{children:"No daily aggregated data to display."})]}),(0,s.jsx)(b,{className:"flex items-center justify-center min-h-[300px]",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please load and process data for daily view."})})]})}let eM={totalDownloadedMB:{label:"Download (MB)",color:"hsl(var(--chart-1))",icon:ef.A},totalUploadedMB:{label:"Upload (MB)",color:"hsl(var(--chart-2))",icon:ej.A}};function ek(e){let{data:t,chartTitlePrefix:a=""}=e,r=l.useMemo(()=>t&&0!==t.length?t.map(e=>({weekLabel:"W".concat(e.weekNumber," (").concat(K(e.startDate),")"),timestamp:e.startDate.getTime(),totalDownloadedMB:parseFloat(e.totalDownloadedMB.toFixed(2)),totalUploadedMB:parseFloat(e.totalUploadedMB.toFixed(2)),totalDurationSeconds:e.totalDurationSeconds,startDate:e.startDate,endDate:e.endDate})).sort((e,t)=>e.timestamp-t.timestamp):[],[t]);return r&&0!==r.length?(0,s.jsxs)(j,{className:"shadow-lg",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(ev.A,{className:"h-6 w-6 text-primary"}),(0,s.jsxs)(w,{children:[a,"Weekly Aggregated Data Trends"]})]}),(0,s.jsx)(N,{children:"Weekly total download and upload volume trends."})]}),(0,s.jsx)(b,{children:(0,s.jsx)(ei,{config:eM,className:"h-[70vh] w-full",children:(0,s.jsxs)(eu.b,{accessibilityLayer:!0,data:r,margin:{top:5,right:20,left:0,bottom:r.length>7?60:5},children:[(0,s.jsx)(eh.d,{vertical:!1,strokeDasharray:"3 3"}),(0,s.jsx)(ex.W,{dataKey:"weekLabel",tickLine:!1,axisLine:!0,tickMargin:10,angle:r.length>7?-45:0,textAnchor:r.length>7?"end":"middle",minTickGap:0,interval:r.length>15?Math.floor(r.length/8):0}),(0,s.jsx)(eg.h,{label:{value:"Data (MB)",angle:-90,position:"insideLeft",offset:10},tickFormatter:e=>H(e,0)}),(0,s.jsx)(es.m,{content:(0,s.jsx)(e=>{let{active:a,payload:l,label:r}=e;if(a&&l&&l.length){let e=l[0].payload,a=t.find(e=>"W".concat(e.weekNumber," (").concat(K(e.startDate),")")===r),n=a?"".concat(K(a.startDate)," - ").concat(K(a.endDate)):r,o=86400*(a?V(a.startDate,a.endDate):7)-e.totalDurationSeconds;return(0,s.jsxs)("div",{className:"bg-background border p-3 shadow-lg rounded-md text-sm",children:[(0,s.jsxs)("p",{className:"font-bold mb-1",children:["Week: ",n]}),void 0!==e.totalDurationSeconds&&(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(ey.A,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),"Active: ",Y(e.totalDurationSeconds,!0)]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(eb.A,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),"Inactive: ",Y(o>0?o:0,!0)]}),l.map(e=>(0,s.jsxs)("p",{style:{color:e.stroke},className:"flex items-center",children:["totalDownloadedMB"===e.dataKey&&(0,s.jsx)(ef.A,{className:"mr-1.5 h-4 w-4"}),"totalUploadedMB"===e.dataKey&&(0,s.jsx)(ej.A,{className:"mr-1.5 h-4 w-4"}),e.name,": ",H(e.value)]},e.dataKey))]})}return null},{}),cursor:{strokeDasharray:"3 3"}}),(0,s.jsx)(el.s,{content:(0,s.jsx)(ec,{}),verticalAlign:"top",wrapperStyle:{paddingBottom:"10px"}}),(0,s.jsx)(ep.N,{type:"monotone",dataKey:"totalDownloadedMB",stroke:"var(--color-totalDownloadedMB)",strokeWidth:2,dot:{r:3},activeDot:{r:6},name:eM.totalDownloadedMB.label}),(0,s.jsx)(ep.N,{type:"monotone",dataKey:"totalUploadedMB",stroke:"var(--color-totalUploadedMB)",strokeWidth:2,dot:{r:3},activeDot:{r:6},name:eM.totalUploadedMB.label})]})})})]}):(0,s.jsxs)(j,{children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(w,{children:[a,"Weekly Aggregation Chart"]}),(0,s.jsx)(N,{children:"No weekly aggregated data to display."})]}),(0,s.jsx)(b,{className:"flex items-center justify-center min-h-[300px]",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please load and process data for weekly view."})})]})}var eT=a(3401),eA=a(58227);let eB={totalDownloadedMB:{label:"Download (MB)",color:"hsl(var(--chart-1))",icon:ef.A},totalUploadedMB:{label:"Upload (MB)",color:"hsl(var(--chart-2))",icon:ej.A}};function eI(e){let{data:t,chartTitlePrefix:a=""}=e,r=l.useMemo(()=>t&&0!==t.length?t.map(e=>({monthLabel:"".concat(e.monthName.substring(0,3)," ").concat(e.year),timestamp:e.startDate.getTime(),totalDownloadedMB:parseFloat(e.totalDownloadedMB.toFixed(2)),totalUploadedMB:parseFloat(e.totalUploadedMB.toFixed(2)),totalDurationSeconds:e.totalDurationSeconds,startDate:e.startDate,endDate:e.endDate})).sort((e,t)=>e.timestamp-t.timestamp):[],[t]);return r&&0!==r.length?(0,s.jsxs)(j,{className:"shadow-lg",children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(L.A,{className:"h-6 w-6 text-primary"}),(0,s.jsxs)(w,{children:[a,"Monthly Aggregated Data"]})]}),(0,s.jsx)(N,{children:"Monthly total download and upload volumes."})]}),(0,s.jsx)(b,{children:(0,s.jsx)(ei,{config:eB,className:"h-[70vh] w-full",children:(0,s.jsxs)(eT.E,{accessibilityLayer:!0,data:r,margin:{top:5,right:20,left:0,bottom:r.length>7?50:5},children:[(0,s.jsx)(eh.d,{vertical:!1,strokeDasharray:"3 3"}),(0,s.jsx)(ex.W,{dataKey:"monthLabel",tickLine:!1,axisLine:!0,tickMargin:10,angle:r.length>7?-45:0,textAnchor:r.length>7?"end":"middle",minTickGap:0,interval:r.length>12?Math.floor(r.length/10):0}),(0,s.jsx)(eg.h,{label:{value:"Data (MB)",angle:-90,position:"insideLeft",offset:10},tickFormatter:e=>H(e,0)}),(0,s.jsx)(es.m,{content:(0,s.jsx)(e=>{let{active:a,payload:l,label:r}=e;if(a&&l&&l.length){let e=l[0].payload,a=t.find(e=>"".concat(e.monthName.substring(0,3)," ").concat(e.year)===r),n=a?"".concat(a.monthName," ").concat(a.year):r,o=86400*(a?V(a.startDate,a.endDate):30)-e.totalDurationSeconds;return(0,s.jsxs)("div",{className:"bg-background border p-3 shadow-lg rounded-md text-sm",children:[(0,s.jsxs)("p",{className:"font-bold mb-1",children:["Month: ",n]}),void 0!==e.totalDurationSeconds&&(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(ey.A,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),"Active: ",Y(e.totalDurationSeconds,!0)]}),(0,s.jsxs)("p",{className:"flex items-center",children:[(0,s.jsx)(eb.A,{className:"mr-1.5 h-4 w-4 text-muted-foreground"}),"Inactive: ",Y(o>0?o:0,!0)]}),l.map(e=>(0,s.jsxs)("p",{style:{color:e.fill},className:"flex items-center",children:["totalDownloadedMB"===e.dataKey&&(0,s.jsx)(ef.A,{className:"mr-1.5 h-4 w-4"}),"totalUploadedMB"===e.dataKey&&(0,s.jsx)(ej.A,{className:"mr-1.5 h-4 w-4"}),e.name,": ",H(e.value)]},e.dataKey))]})}return null},{}),cursor:{fill:"hsl(var(--muted) / 0.5)"}}),(0,s.jsx)(el.s,{content:(0,s.jsx)(ec,{}),verticalAlign:"top",wrapperStyle:{paddingBottom:"10px"}}),(0,s.jsx)(eA.y,{dataKey:"totalDownloadedMB",fill:"var(--color-totalDownloadedMB)",radius:[4,4,0,0],name:eB.totalDownloadedMB.label}),(0,s.jsx)(eA.y,{dataKey:"totalUploadedMB",fill:"var(--color-totalUploadedMB)",radius:[4,4,0,0],name:eB.totalUploadedMB.label})]})})})]}):(0,s.jsxs)(j,{children:[(0,s.jsxs)(y,{children:[(0,s.jsxs)(w,{children:[a,"Monthly Aggregation Chart"]}),(0,s.jsx)(N,{children:"No monthly aggregated data to display."})]}),(0,s.jsx)(b,{className:"flex items-center justify-center min-h-[300px]",children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Please load and process data for monthly view."})})]})}async function eC(e){let t=await fetch("https://network-session-backend.onrender.com/api/analyzeSessionInsights",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionData:"string"!=typeof e.sessionData?JSON.stringify(e.sessionData):e.sessionData})});if(!t.ok)throw Error("API call failed with status ".concat(t.status));return(await t.json()).data}var eU=a(30064);let e_=eU.bL,eO=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(eU.B8,{ref:t,className:(0,c.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",a),...l})});eO.displayName=eU.B8.displayName;let eL=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(eU.l9,{ref:t,className:(0,c.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",a),...l})});eL.displayName=eU.l9.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(eU.UC,{ref:t,className:(0,c.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...l})}).displayName=eU.UC.displayName;var eF=a(49415);let eR=eF.bL,eP=eF.l9,eE=l.forwardRef((e,t)=>{let{className:a,align:l="center",sideOffset:r=4,...n}=e;return(0,s.jsx)(eF.ZL,{children:(0,s.jsx)(eF.UC,{ref:t,align:l,sideOffset:r,className:(0,c.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})})});eE.displayName=eF.UC.displayName;var eW=a(965),eY=a(73158),eK=a(83227);function eH(e){let{className:t,classNames:a,showOutsideDays:l=!0,...r}=e;return(0,s.jsx)(eK.hv,{showOutsideDays:l,className:(0,c.cn)("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,c.cn)(m({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,c.cn)(m({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...a},components:{IconLeft:e=>{let{className:t,...a}=e;return(0,s.jsx)(eW.A,{className:(0,c.cn)("h-4 w-4",t),...a})},IconRight:e=>{let{className:t,...a}=e;return(0,s.jsx)(eY.A,{className:(0,c.cn)("h-4 w-4",t),...a})}},...r})}eH.displayName="Calendar";var eV=a(89051);let ez=l.forwardRef((e,t)=>{let{className:a,children:l,...r}=e;return(0,s.jsxs)(eV.bL,{ref:t,className:(0,c.cn)("relative overflow-hidden",a),...r,children:[(0,s.jsx)(eV.LM,{className:"h-full w-full rounded-[inherit]",children:l}),(0,s.jsx)(eJ,{}),(0,s.jsx)(eV.OK,{})]})});ez.displayName=eV.bL.displayName;let eJ=l.forwardRef((e,t)=>{let{className:a,orientation:l="vertical",...r}=e;return(0,s.jsx)(eV.VM,{ref:t,orientation:l,className:(0,c.cn)("flex touch-none select-none transition-colors","vertical"===l&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===l&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",a),...r,children:(0,s.jsx)(eV.lr,{className:"relative flex-1 rounded-full bg-border"})})});eJ.displayName=eV.VM.displayName;var eG=a(50594),e$=a(34214),eQ=a(4607),eX=a(17607),eq=a(51920),eZ=a(16861),e0=a(71978),e1=a(9133),e2=a(89829),e4=a(77724),e5=a(35987),e3=a(63482),e6=a(53941),e8=a(92759),e9=a(15304),e7=a(76959),te=a(80644),tt=a(83013),ta=a(30347),ts=a(34548),tl=a(65119),tr=a(5637),tn=a(19164),to=a(74641),ti=a(78816),td=a(76198),tc=a(1407),tm=a(67646),tu=a(15175),th=a(35523),tx=a(45887),tg=a(94376),tp=a(37140);let tf=[{label:"Today",getRange:()=>({from:(0,te.o)(new Date),to:(0,e6.D)(new Date)})},{label:"Yesterday",getRange:()=>{let e=(0,ti.e)(new Date,1);return{from:(0,te.o)(e),to:(0,e6.D)(e)}}},{label:"Last 7 Days",getRange:()=>({from:(0,te.o)((0,ti.e)(new Date,6)),to:(0,e6.D)(new Date)})},{label:"Last 30 Days",getRange:()=>({from:(0,te.o)((0,ti.e)(new Date,29)),to:(0,e6.D)(new Date)})},{label:"This Week (Mon-Sun)",getRange:()=>({from:(0,ts.k)(new Date,{weekStartsOn:1}),to:(0,tl.$)(new Date,{weekStartsOn:1})})},{label:"Last Week (Mon-Sun)",getRange:()=>({from:(0,ts.k)((0,td.k)(new Date,1),{weekStartsOn:1}),to:(0,tl.$)((0,td.k)(new Date,1),{weekStartsOn:1})})},{label:"This Month",getRange:()=>({from:(0,tn.w)(new Date),to:(0,to.p)(new Date)})},{label:"Year to Date",getRange:()=>({from:(0,tc.D)(new Date),to:(0,e6.D)(new Date)})}],tj=[{label:"Last 4 Weeks",getRange:()=>({from:(0,ts.k)((0,td.k)(new Date,3),{weekStartsOn:1}),to:(0,tl.$)(new Date,{weekStartsOn:1})})},{label:"Last 12 Weeks",getRange:()=>({from:(0,ts.k)((0,td.k)(new Date,11),{weekStartsOn:1}),to:(0,tl.$)(new Date,{weekStartsOn:1})})},{label:"This Quarter",getRange:()=>({from:(0,tm.a)(new Date),to:(0,tu.j)(new Date)})},{label:"Last Quarter",getRange:()=>{let e=(0,th.c)(new Date,1);return{from:(0,tm.a)(e),to:(0,tu.j)(e)}}},{label:"Year to Date (Weekly)",getRange:()=>({from:(0,tc.D)(new Date),to:(0,tl.$)(new Date,{weekStartsOn:1})})},{label:"Last Calendar Year",getRange:()=>{let e=(0,tx.d)(new Date,1);return{from:(0,tc.D)(e),to:(0,tg.Q)(e)}}}],ty=[{label:"Last 3 Months",getRange:()=>({from:(0,tn.w)((0,tp.a)(new Date,2)),to:(0,to.p)(new Date)})},{label:"Last 6 Months",getRange:()=>({from:(0,tn.w)((0,tp.a)(new Date,5)),to:(0,to.p)(new Date)})},{label:"Last 12 Months",getRange:()=>({from:(0,tn.w)((0,tp.a)(new Date,11)),to:(0,to.p)(new Date)})},{label:"This Quarter",getRange:()=>({from:(0,tm.a)(new Date),to:(0,tu.j)(new Date)})},{label:"Last Quarter",getRange:()=>{let e=(0,th.c)(new Date,1);return{from:(0,tm.a)(e),to:(0,tu.j)(e)}}},{label:"Year to Date (Monthly)",getRange:()=>({from:(0,tc.D)(new Date),to:(0,to.p)(new Date)})},{label:"Last Calendar Year",getRange:()=>{let e=(0,tx.d)(new Date,1);return{from:(0,tc.D)(e),to:(0,tg.Q)(e)}}}],tw={session:[{label:"Top 5 Sessions (Max Download)",type:"TOP_N",nValue:5,metric:"download",sortDirection:"desc",description:"Sessions with the most data downloaded."},{label:"Top 5 Sessions (Longest Duration)",type:"TOP_N",nValue:5,metric:"duration",sortDirection:"desc",description:"Sessions that lasted the longest."},{label:"Top 5 Sessions (Max Upload)",type:"TOP_N",nValue:5,metric:"upload",sortDirection:"desc",description:"Sessions with the most data uploaded."}],daily:[{label:"Top 5 Days (Max Total Usage)",type:"TOP_N",nValue:5,metric:"totalUsage",sortDirection:"desc",description:"Days with the highest combined download and upload."},{label:"Top 3 Days (Max Total Usage)",type:"TOP_N",nValue:3,metric:"totalUsage",sortDirection:"desc",description:"Top 3 days with the highest combined download and upload."},{label:"Top 5 Days (Min Total Usage)",type:"TOP_N",nValue:5,metric:"totalUsage",sortDirection:"asc",description:"Days with the lowest combined download and upload."},{label:"Top 5 Days (Max Download)",type:"TOP_N",nValue:5,metric:"download",sortDirection:"desc",description:"Days with the most data downloaded."},{label:"Top 5 Days (Longest Duration)",type:"TOP_N",nValue:5,metric:"duration",sortDirection:"desc",description:"Days with the longest total session duration."}],weekly:[{label:"Top 3 Weeks (Max Total Usage)",type:"TOP_N",nValue:3,metric:"totalUsage",sortDirection:"desc",description:"Weeks with the highest combined download and upload."},{label:"Top 3 Weeks (Min Total Usage)",type:"TOP_N",nValue:3,metric:"totalUsage",sortDirection:"asc",description:"Weeks with the lowest combined download and upload."}],monthly:[{label:"Top 3 Months (Max Total Usage)",type:"TOP_N",nValue:3,metric:"totalUsage",sortDirection:"desc",description:"Months with the highest combined download and upload."},{label:"Top 3 Months (Min Total Usage)",type:"TOP_N",nValue:3,metric:"totalUsage",sortDirection:"asc",description:"Months with the lowest combined download and upload."}]};function tN(){let[e,t]=l.useState(null),[a,r]=l.useState(null),[o,i]=l.useState(null),[d,c]=l.useState(null),[m,h]=l.useState(null),[x,f]=l.useState(null),[S,M]=l.useState(null),[k,T]=l.useState(!1),[A,B]=l.useState("chart"),[C,U]=l.useState(void 0),[L,W]=l.useState(void 0),[H,V]=l.useState([]),[z,J]=l.useState(!0),[G,$]=l.useState(null),[Q,X]=l.useState(!1),{toast:q}=(0,g.dj)(),Z=l.useRef(null),[ea,es]=l.useState(!1),[el,er]=l.useState(!1),[en,eo]=l.useState(null),[ei,ed]=l.useState(null),[ec,em]=l.useState(!0),[eu,eh]=l.useState(null),ex=l.useCallback(e=>{t(e),r(null),i(null),c(null),h(null),f(null),$(null),M(null),B("chart"),U(void 0),W(void 0),J(!1),er(!1),eo(null),ed(null)},[]);l.useEffect(()=>{(async()=>{em(!0);try{let e=await fetch("https://network-session-backend.onrender.com/api/network-usage");if(!e.ok)throw Error("API request failed with status ".concat(e.status));let t=await e.json();if(t&&Array.isArray(t.data)&&t.data.length>0){let e=JSON.stringify(t.data,null,2);ex(e),q({title:"Data Loaded from API",description:"Session data has been automatically fetched and loaded."})}else J(!0),q({title:"No Initial Data",description:"Could not fetch initial session data from the API or data was empty. Please input manually.",variant:"default"})}catch(e){console.error("Failed to fetch initial session data:",e),J(!0),q({variant:"destructive",title:"API Error",description:"Failed to load initial data: ".concat(e.message,". Please input manually.")})}finally{em(!1)}})()},[ex]),l.useEffect(()=>{if(!e){V([]);return}switch(eo(null),ed(null),S){case"session":case"daily":default:V(tf);break;case"weekly":V(tj);break;case"monthly":V(ty)}},[S,e]);let eg=async t=>{if(!e){q({variant:"destructive",title:"No Data",description:"Please load session data first."});return}T(!0),M(t),eo(null),ed(null);let s=a;if(!s)try{s=function(e){let t;if(!e||!e.trim())return[];try{t=JSON.parse(e)}catch(e){throw new R("Invalid JSON format: ".concat(e.message,". Please ensure your input is a valid JSON array."))}if(!Array.isArray(t))throw new R('Input data must be a JSON array. e.g., [{"loginTime": "...", ...}]');let a=[];for(let e=0;e<t.length;e++){let s=t[e];if("object"!=typeof s||null===s)throw new R("Item at index ".concat(e," is not a valid object."));let{loginTime:l,sessionTime:r,download:n,upload:o}=s;if("string"!=typeof l)throw new R("Item at index ".concat(e,': "loginTime" must be a string (e.g., "DD-MM-YYYY HH:MM:SS").'));if("string"!=typeof r)throw new R("Item at index ".concat(e,': "sessionTime" must be a string (e.g., "HH:MM:SS").'));if("number"!=typeof n||isNaN(n)||n<0)throw new R("Item at index ".concat(e,': "download" must be a non-negative number. Got: "').concat(n,'".'));if("number"!=typeof o||isNaN(o)||o<0)throw new R("Item at index ".concat(e,': "upload" must be a non-negative number. Got: "').concat(o,'".'));try{P(l)}catch(t){throw new R("Item at index ".concat(e,': Invalid "loginTime" format for "').concat(l,'". Expected "DD-MM-YYYY HH:MM:SS". Underlying error: ').concat(t.message))}try{E(r)}catch(t){throw new R("Item at index ".concat(e,': Invalid "sessionTime" format for "').concat(r,'". Expected "HH:MM:SS". Underlying error: ').concat(t.message))}a.push({loginTime:l,sessionTime:r,download:n,upload:o})}return a}(e),r(s)}catch(e){console.error("Error parsing raw session data:",e),q({variant:"destructive",title:"Error Parsing Data",description:e instanceof R?e.message:"An unexpected error occurred during parsing."}),r(null),M(null),T(!1);return}let l=s.filter(e=>{try{let t=P(e.loginTime),a=!C||t.getTime()>=(0,te.o)(C).getTime(),s=!L||t.getTime()<=(0,e6.D)(L).getTime();return a&&s}catch(t){return console.warn("Error parsing loginTime during filtering:",t,e.loginTime),!1}});try{if("session"===t){let e=[...l].sort((e,t)=>{try{return P(t.loginTime).getTime()-P(e.loginTime).getTime()}catch(e){return 0}});i(e),c(null),h(null),f(null)}else if("daily"===t){let e=function(e){let t=new Map;return e.forEach(e=>{(function(e){let t=[],a=P(e.loginTime),s=E(e.sessionTime);if(s<=0)return[];let l=(0,e5.p)(a,s),r=a;for(;(0,e3.Y)(r,l);){let a=(0,e6.D)(r),n=(0,e8.j)([l,a]);(0,e3.Y)(l,n)&&(n=l);let o=(0,e9.O)(n,r);if(o<=0&&!(0,e7.r)(r,n)&&o<0){r=(0,e5.p)(n,1);continue}if(o<=0){if(r=(0,te.o)((0,e5.p)(n,1)),(0,e3.Y)(r,l))continue;break}let i=o/s,d=e.download*i,c=e.upload*i;t.push({originalSession:e,segmentStartTime:r,segmentEndTime:n,durationSeconds:o,downloadMB:d,uploadMB:c}),r=n,(0,e7.r)(r,a)&&(0,e3.Y)(r,l)&&(r=(0,te.o)((0,e5.p)(r,1)))}return t})(e).forEach(e=>{if(e.durationSeconds<=0)return;let a=(0,tt.GP)(e.segmentStartTime,"yyyy-MM-dd");t.has(a)||t.set(a,{date:(0,te.o)(e.segmentStartTime),totalDurationSeconds:0,totalDownloadedMB:0,totalUploadedMB:0,sessionCount:0});let s=t.get(a);s.totalDurationSeconds+=e.durationSeconds,s.totalDownloadedMB+=e.downloadMB,s.totalUploadedMB+=e.uploadMB,s.sessionCount+=1})}),Array.from(t.values()).sort((e,t)=>t.date.getTime()-e.date.getTime())}(l);c(e),i(null),h(null),f(null)}else if("weekly"===t){let e=function(e){let t=new Map;return e.forEach(e=>{let a=P(e.loginTime),s=E(e.sessionTime);if(s<=0)return;let l=a.getFullYear(),r=(0,ta.N)(a,{weekStartsOn:1}),n="".concat(l,"-W").concat(String(r).padStart(2,"0")),o=(0,ts.k)(a,{weekStartsOn:1}),i=(0,tl.$)(a,{weekStartsOn:1});t.has(n)||t.set(n,{year:l,weekNumber:r,startDate:o,endDate:i,totalDurationSeconds:0,totalDownloadedMB:0,totalUploadedMB:0,sessionCount:0});let d=t.get(n);d.totalDurationSeconds+=s,d.totalDownloadedMB+=e.download,d.totalUploadedMB+=e.upload,d.sessionCount+=1}),Array.from(t.values()).sort((e,t)=>t.year!==e.year?t.year-e.year:t.weekNumber-e.weekNumber)}(l);h(e),i(null),c(null),f(null)}else if("monthly"===t){let e=function(e){let t=new Map;return e.forEach(e=>{let a=P(e.loginTime),s=E(e.sessionTime);if(s<=0)return;let l=a.getFullYear(),r=(0,tr.t)(a),n="".concat(l,"-").concat(String(r+1).padStart(2,"0")),o=(0,tn.w)(a),i=(0,to.p)(a),d=(0,tt.GP)(a,"MMMM");t.has(n)||t.set(n,{year:l,month:r,monthName:d,startDate:o,endDate:i,totalDurationSeconds:0,totalDownloadedMB:0,totalUploadedMB:0,sessionCount:0});let c=t.get(n);c.totalDurationSeconds+=s,c.totalDownloadedMB+=e.download,c.totalUploadedMB+=e.upload,c.sessionCount+=1}),Array.from(t.values()).sort((e,t)=>t.year!==e.year?t.year-e.year:t.month-e.month)}(l);f(e),i(null),c(null),h(null)}}catch(e){console.error("Error processing data for ".concat(t," view:"),e),q({variant:"destructive",title:"Error Processing Data for ".concat(t||"selected"," view"),description:e instanceof R?e.message:"An unexpected error occurred."}),"session"===t&&i(null),"daily"===t&&c(null),"weekly"===t&&h(null),"monthly"===t&&f(null)}finally{T(!1)}};l.useEffect(()=>{S&&(e||a)&&eg(S)},[C,L]);let ep=async()=>{if(!e){q({variant:"destructive",title:"No Data",description:"Please load session data first."});return}X(!0),$(null),setTimeout(()=>{var e;null===(e=Z.current)||void 0===e||e.scrollIntoView({behavior:"smooth",block:"start"})},100);try{let t=await eC({sessionData:e});$(t),q({title:"AI Analysis Complete",description:"Session insights have been generated."})}catch(e){console.error("AI Analysis Error:",e),q({variant:"destructive",title:"AI Analysis Failed",description:e instanceof Error?e.message:"An unexpected error occurred during AI analysis."})}finally{X(!1)}};l.useEffect(()=>{eh(new Date().toLocaleTimeString())},[]);let ef=e=>{let{from:t,to:a}=e.getRange();U(t),W(a),eo(null),ed(null)},ej=e=>{if(!S)return;T(!0),ed(e.label);let t=[];if("session"===S&&o?t=o:"daily"===S&&d?t=d:"weekly"===S&&m?t=m:"monthly"===S&&x&&(t=x),0===t.length){q({title:"No Data for Smart Filter",description:"The current view has no data to apply smart filters on.",variant:"default"}),eo([]),T(!1);return}let a=t=>{switch(e.metric){case"download":return"session"===S?t.download:t.totalDownloadedMB;case"upload":return"session"===S?t.upload:t.totalUploadedMB;case"totalUsage":return"session"===S?t.download+t.upload:t.totalDownloadedMB+t.totalUploadedMB;case"duration":return"session"===S?E(t.sessionTime):t.totalDurationSeconds;case"sessionCount":return"session"!==S?t.sessionCount:0;default:return 0}};eo([...t].sort((t,s)=>{let l=a(t),r=a(s);return"desc"===e.sortDirection?r-l:l-r}).slice(0,e.nValue)),T(!1)};return(0,s.jsxs)("div",{className:"flex flex-col min-h-screen bg-background",children:[(0,s.jsx)(p,{}),(0,s.jsx)("main",{className:"flex-grow px-4 md:px-6 py-8 w-full",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 h-full",children:[(0,s.jsxs)("div",{className:"lg:col-span-1 space-y-6 lg:sticky lg:top-20 lg:max-h-[calc(100vh-8rem)] lg:overflow-y-auto lg:self-start lg:pr-4",children:[ec?(0,s.jsxs)(j,{className:"shadow-lg",children:[(0,s.jsx)(y,{children:(0,s.jsxs)(w,{className:"flex items-center gap-2",children:[(0,s.jsx)(n.A,{className:"h-6 w-6 animate-spin text-primary"}),"Loading Initial Data..."]})}),(0,s.jsx)(b,{children:(0,s.jsx)("p",{className:"text-muted-foreground",children:"Attempting to fetch session data from the server. Please wait."})})]}):(0,s.jsx)(s.Fragment,{children:z||!e?(0,s.jsxs)(s.Fragment,{children:[e&&(0,s.jsxs)(u,{variant:"outline",onClick:()=>J(!1),className:"w-full",children:[(0,s.jsx)(eQ.A,{className:"mr-2 h-4 w-4"})," Hide Data Input"]}),(0,s.jsx)(D,{onSubmit:e=>{ex(e),q({title:"Data Loaded",description:"Session data has been manually loaded."})},isLoading:k||Q})]}):(0,s.jsxs)(u,{variant:"outline",onClick:()=>J(!0),className:"w-full",children:[(0,s.jsx)(eX.A,{className:"mr-2 h-4 w-4"})," Show Data Input"]})}),e&&!ec&&(0,s.jsxs)(j,{className:"shadow-lg",children:[(0,s.jsx)(y,{children:(0,s.jsx)(w,{children:"View Options & Filters"})}),(0,s.jsxs)(b,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"Aggregation Level:"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,s.jsxs)(u,{onClick:()=>eg("session"),disabled:k||!e,variant:"session"===S?"default":"outline",children:[(0,s.jsx)(e$.A,{className:"mr-2 h-4 w-4"}),"Sessions"]}),(0,s.jsxs)(u,{onClick:()=>eg("daily"),disabled:k||!e,variant:"daily"===S?"default":"outline",children:[(0,s.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Daily"]}),(0,s.jsxs)(u,{onClick:()=>eg("weekly"),disabled:k||!e,variant:"weekly"===S?"default":"outline",children:[(0,s.jsx)(O.A,{className:"mr-2 h-4 w-4"}),"Weekly"]}),(0,s.jsxs)(u,{onClick:()=>eg("monthly"),disabled:k||!e,variant:"monthly"===S?"default":"outline",children:[(0,s.jsx)(eq.A,{className:"mr-2 h-4 w-4"}),"Monthly"]})]})]}),(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"Filter by Date Range:"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:[(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{asChild:!0,children:(0,s.jsxs)(u,{variant:"outline",className:"w-full justify-start text-left font-normal text-sm",disabled:k||!e,children:[(0,s.jsx)(eq.A,{className:"mr-2 h-4 w-4"}),C?K(C):(0,s.jsx)("span",{children:"Start date"})]})}),(0,s.jsx)(eE,{className:"w-auto p-0",children:(0,s.jsx)(eH,{mode:"single",selected:C,onSelect:U,initialFocus:!0,disabled:e=>!!L&&e>L})})]}),(0,s.jsxs)(eR,{children:[(0,s.jsx)(eP,{asChild:!0,children:(0,s.jsxs)(u,{variant:"outline",className:"w-full justify-start text-left font-normal text-sm",disabled:k||!e,children:[(0,s.jsx)(eq.A,{className:"mr-2 h-4 w-4"}),L?K(L):(0,s.jsx)("span",{children:"End date"})]})}),(0,s.jsx)(eE,{className:"w-auto p-0",children:(0,s.jsx)(eH,{mode:"single",selected:L,onSelect:W,initialFocus:!0,disabled:e=>!!C&&e<C})})]})]})]}),H.length>0&&(0,s.jsxs)("div",{className:"space-y-2 pt-2",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-muted-foreground",children:"Date Presets:"}),(0,s.jsx)(ez,{className:"w-full rounded-md ".concat(el?"max-h-20":"max-h-48"," transition-all duration-300"),children:(0,s.jsx)("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2 p-1",children:H.map(t=>(0,s.jsx)(u,{variant:"outline",size:"sm",onClick:()=>ef(t),disabled:k||!e,className:"text-xs",children:t.label},t.label))})})]}),(C||L)&&(0,s.jsxs)(u,{variant:"outline",size:"sm",onClick:()=>{U(void 0),W(void 0),eo(null),ed(null)},className:"w-full text-xs text-destructive border-destructive hover:bg-destructive/5 hover:text-destructive mt-2",disabled:k,children:[(0,s.jsx)(eZ.A,{className:"mr-1 h-3 w-3"})," Clear Date Filters"]}),S&&(0,s.jsxs)("div",{className:"pt-4",children:[(0,s.jsx)("p",{className:"text-sm font-medium mb-1 text-center text-muted-foreground",children:"Display Format:"}),(0,s.jsx)(e_,{defaultValue:"chart",value:A,onValueChange:e=>B(e),className:"w-full",children:(0,s.jsxs)(eO,{className:"grid w-full grid-cols-2",children:[(0,s.jsxs)(eL,{value:"table",disabled:k,children:[(0,s.jsx)(e0.A,{className:"mr-2 h-4 w-4"}),"Table"]}),(0,s.jsxs)(eL,{value:"chart",disabled:k,children:[(0,s.jsx)(e1.A,{className:"mr-2 h-4 w-4"}),"Chart"]})]})})]}),el&&S&&tw[S]&&(0,s.jsxs)(j,{className:"mt-4 border-primary/50",children:[(0,s.jsxs)(y,{className:"pb-2 pt-4",children:[(0,s.jsxs)(w,{className:"text-base flex items-center gap-2",children:[(0,s.jsx)(e2.A,{className:"h-5 w-5 text-primary"}),"Smart Filters"]}),(0,s.jsx)(N,{className:"text-xs",children:"Apply data-driven filters to the current view & date range."})]}),(0,s.jsx)(b,{className:"pt-2",children:(0,s.jsx)("div",{className:"grid grid-cols-1 gap-2",children:tw[S].map(e=>(0,s.jsx)(u,{variant:"outline",size:"sm",onClick:()=>ej(e),disabled:k,className:"text-xs justify-start",title:e.description,children:e.label},e.label))})})]}),(0,s.jsx)(u,{onClick:()=>{if(!S){q({variant:"destructive",title:"Select a View",description:"Please select an aggregation level (Session, Daily, etc.) before using smart filters."});return}es(!0),setTimeout(()=>{er(e=>!e),el&&(eo(null),ed(null)),es(!1)},200)},disabled:ea||!e||!S,className:"w-full mt-4",variant:"outline",children:ea?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Loading Smart Filters..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e2.A,{className:"mr-2 h-4 w-4"}),el?"Hide Smart Filters":"Use Smart Filters"]})}),el&&(0,s.jsx)(u,{variant:"outline",size:"sm",className:"w-full text-xs mt-1",onClick:()=>{er(!1),eo(null),ed(null),S&&eg(S)},children:"Clear Smart Filter & View Options"}),(0,s.jsx)(u,{onClick:ep,disabled:Q||!e,className:"w-full mt-6",children:Q?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing with AI..."]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(I.A,{className:"mr-2 h-4 w-4"}),"Analyze with AI"]})})]})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(()=>{if(k)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-primary/30 rounded-lg min-h-[300px]",children:[(0,s.jsx)(n.A,{className:"h-16 w-16 text-primary animate-spin mb-6"}),(0,s.jsx)("p",{className:"text-xl font-medium text-primary mb-1",children:ei?"Applying: ".concat(ei):"Processing Data"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Crunching the numbers, please wait..."})]});let t=en||("session"===S?o:"daily"===S?d:"weekly"===S?m:"monthly"===S?x:null),a=(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-muted-foreground/30 rounded-lg min-h-[300px] text-center",children:[(0,s.jsx)(eG.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium text-muted-foreground mb-1",children:"No Data to Display"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:ei?'The smart filter "'.concat(ei,'" yielded no results for the current selection.'):"No sessions match your current filters or selected view. Try adjusting the date range or select a different view."})]}),l=ei?"".concat(ei," - "):"";switch(S){case"session":if(!t||0===t.length)return a;return"table"===A?(0,s.jsx)(ee,{sessions:t}):(0,s.jsx)(eN,{sessions:t});case"daily":if(!t||0===t.length)return a;return"table"===A?(0,s.jsx)(et,{data:t}):(0,s.jsx)(eS,{data:t,chartTitlePrefix:l});case"weekly":if(!t||0===t.length)return a;return"table"===A?(0,s.jsxs)(j,{children:[(0,s.jsx)(y,{children:(0,s.jsxs)(w,{children:[l,"Weekly Aggregated Data"]})}),(0,s.jsx)(b,{children:(0,s.jsx)("pre",{className:"text-xs bg-muted p-2 rounded overflow-auto max-h-[400px]",children:JSON.stringify(t.map(e=>({...e,startDate:K(e.startDate),endDate:K(e.endDate),totalDurationFormatted:Y(e.totalDurationSeconds,!0),totalDownloadedMB:e.totalDownloadedMB.toFixed(2),totalUploadedMB:e.totalUploadedMB.toFixed(2)})),null,2)})})]}):(0,s.jsx)(ek,{data:t,chartTitlePrefix:l});case"monthly":if(!t||0===t.length)return a;return"table"===A?(0,s.jsxs)(j,{children:[(0,s.jsx)(y,{children:(0,s.jsxs)(w,{children:[l,"Monthly Aggregated Data"]})}),(0,s.jsx)(b,{children:(0,s.jsx)("pre",{className:"text-xs bg-muted p-2 rounded overflow-auto max-h-[400px]",children:JSON.stringify(t.map(e=>({...e,startDate:K(e.startDate),endDate:K(e.endDate),totalDurationFormatted:Y(e.totalDurationSeconds,!0),totalDownloadedMB:e.totalDownloadedMB.toFixed(2),totalUploadedMB:e.totalUploadedMB.toFixed(2)})),null,2)})})]}):(0,s.jsx)(eI,{data:t,chartTitlePrefix:l});default:if(e&&!ec)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-muted-foreground/30 rounded-lg min-h-[300px] text-center",children:[(0,s.jsx)(e$.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium text-muted-foreground mb-1",children:"Data Loaded, Select a View"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"Choose Session, Daily, Weekly, or Monthly to process and display your data."})]});if(!ec&&!e&&!z)return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-muted-foreground/30 rounded-lg min-h-[300px] text-center",children:[(0,s.jsx)(v.A,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("p",{className:"text-lg font-medium text-muted-foreground mb-1",children:"Load Your Session Data"}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"No data automatically loaded. Use the form on the left to input your session data in JSON format."})]});return null}})(),(0,s.jsxs)("div",{ref:Z,className:"space-y-8",children:[Q&&(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-8 border-2 border-dashed border-primary/30 rounded-lg min-h-[300px] bg-card",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,s.jsx)(e4.A,{className:"h-16 w-16 text-primary animate-pulse"}),(0,s.jsx)(n.A,{className:"h-16 w-16 text-primary animate-spin"})]}),(0,s.jsx)("p",{className:"text-2xl font-semibold text-primary mb-2",children:"AI Brain at Work..."}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Analyzing your data to uncover insights. Please wait a moment."})]}),!Q&&G&&(0,s.jsx)(F,{data:G})]})]})]})}),(0,s.jsxs)("footer",{className:"py-6 text-center text-sm text-muted-foreground border-t",children:["\xa9 ",new Date().getFullYear()," Session Insights. All rights reserved.",eu?(0,s.jsxs)("p",{className:"text-xs",children:["Client Time: ",eu]}):(0,s.jsx)("p",{className:"text-xs",children:"Loading client time..."})]})]})}},59434:(e,t,a)=>{"use strict";a.d(t,{cn:()=>r});var s=a(52596),l=a(39688);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,l.QP)((0,s.$)(t))}},87481:(e,t,a)=>{"use strict";a.d(t,{dj:()=>u});var s=a(12115);let l=0,r=new Map,n=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);r.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?n(a):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},i=[],d={toasts:[]};function c(e){d=o(d,e),i.forEach(e=>{e(d)})}function m(e){let{...t}=e,a=(l=(l+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:a});return c({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function u(){let[e,t]=s.useState(d);return s.useEffect(()=>(i.push(t),()=>{let e=i.indexOf(t);e>-1&&i.splice(e,1)}),[e]),{...e,toast:m,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},93787:(e,t,a)=>{Promise.resolve().then(a.bind(a,43550))}},e=>{var t=t=>e(e.s=t);e.O(0,[316,674,499,441,684,358],()=>t(93787)),_N_E=e.O()}]);